generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  sku_code           String              @id
  product_name       String
  description        String?
  category           String
  color              String
  style              String
  price              Float
  discount           Float
  inventory_quantity InventoryQuantity[] @relation("ProductToInventoryQuantity")
  images             String[]
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  order_items        OrderItem[]         @relation("ProductToOrderItem")
  cart_items         CartItem[]          @relation("ProductToCartItem")
}

model Order {
  id          String      @id
  order_date  DateTime
  total_price Float
  status      String
  user_id     String
  order_items OrderItem[]
}

model OrderItem {
  id               Int     @id @default(autoincrement())
  quantity         Int
  order            Order   @relation(fields: [order_id], references: [id], onDelete: Cascade)
  order_id         String
  product_sku_code String
  product          Product @relation("ProductToOrderItem", fields: [product_sku_code], references: [sku_code])
}

model InventoryQuantity {
  id               Int     @id @default(autoincrement())
  size             String
  quantity         Int
  product          Product @relation("ProductToInventoryQuantity", fields: [product_sku_code], references: [sku_code], onDelete: Cascade)
  product_sku_code String
}

model Cart {
  id         String     @id @default(uuid())
  user_id    String
  cart_items CartItem[]
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
}

model CartItem {
  id               Int     @id @default(autoincrement())
  quantity         Int
  cart             Cart    @relation(fields: [cart_id], references: [id], onDelete: Cascade)
  cart_id          String
  product_sku_code String
  product          Product @relation("ProductToCartItem", fields: [product_sku_code], references: [sku_code])
}
